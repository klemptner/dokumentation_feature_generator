

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Feature Generator Pipeline &mdash; Feature Generator  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Entwicklungsprotokoll" href="protokoll.html" />
    <link rel="prev" title="Installation and Innitialization of Docker Image" href="README_app.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Feature Generator
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation and Innitialization of Docker Image</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README_app.html">Installation and Innitialization of Docker Image</a><ul>
<li class="toctree-l2"><a class="reference internal" href="README_app.html#docker-build-installation">Docker Build - Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="README_app.html#running-feature-generator">Running Feature Generator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="README_app.html#run-docker-container-from-image">Run docker container from image</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="README_app.html#using-the-application">Using the application</a></li>
</ul>
<p class="caption"><span class="caption-text">Pipeline Scenario</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Feature Generator Pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main-file-feature-generator-part1-py">Main file: <em>feature_generator_Part1.py</em></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#part-1">Part 1:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#part-2">Part 2:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Entwicklungs-Protokoll</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="protokoll.html">Entwicklungsprotokoll</a><ul>
<li class="toctree-l2"><a class="reference internal" href="protokoll.html#recherche">Recherche</a></li>
<li class="toctree-l2"><a class="reference internal" href="protokoll.html#topic-model">Topic Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#iteration-1">Iteration 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#iteration-2">Iteration 2</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#iteration-3">Iteration 3</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#iteration-4">Iteration 4</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#iteration-5">Iteration 5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="protokoll.html#retrieve">Retrieve</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#r1">R1</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#r2">R2</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#r3">R3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="protokoll.html#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#o1-1">O1_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#o2">O2</a></li>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#o3">O3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="protokoll.html#classify">Classify</a><ul>
<li class="toctree-l3"><a class="reference internal" href="protokoll.html#c1">C1</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Besprechungen</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="besprechungen.html">Besprechungsnotizen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="besprechungen.html#id1">02.02.2021</a><ul>
<li class="toctree-l3"><a class="reference internal" href="besprechungen.html#moegliche-problematiken">Moegliche Problematiken</a></li>
<li class="toctree-l3"><a class="reference internal" href="besprechungen.html#weiterfuehrung">Weiterfuehrung</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Feature Generator</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Feature Generator Pipeline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/docs/README_V1.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="feature-generator-pipeline">
<h1>Feature Generator Pipeline<a class="headerlink" href="#feature-generator-pipeline" title="Permalink to this headline">¶</a></h1>
<p>In the following, find a basic configuration for a pipeline that trains an activ learning classifier for user specified annotation of articles into topics.</p>
<p><img alt="Overview" src="../_images/overview.jpg" /></p>
<div class="section" id="main-file-feature-generator-part1-py">
<h2>Main file: <em>feature_generator_Part1.py</em><a class="headerlink" href="#main-file-feature-generator-part1-py" title="Permalink to this headline">¶</a></h2>
<p>Open file <em>feature_generator_Part1.py</em>. It calls the various functions needed, and stores the returned dataframes into csv files. In the following only the functions are described.</p>
<p>The following variables can be set in <em>feature_generator_Part1.py</em>, which is the procedure for the main pipeline.</p>
<blockquote>
<div>article_df</div></blockquote>
<p><em>article_df</em> stores the path of the origin file for the pipeline.</p>
<blockquote>
<div>mallet_path</div></blockquote>
<p>This stores the path to the installation of mallet LDA. Default case is <em>feature_generator/utils/mallet/bin</em>,change it if a mallet installation already exists on system.</p>
<div class="section" id="part-1">
<h3>Part 1:<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h3>
<p>The pipeline follows the following procedures by calling several functions. Only variable <code class="docutils literal notranslate"><span class="pre">article_df</span></code> needs to be changed. All other filepaths are predefined in default values such that the standard pipeline works. All files are stored in folder <em>files</em>. This includes <em>Mallet</em>, which is also included in the package under <em>utils/mallet</em>.</p>
<div class="section" id="p1-preprocess-df-pandas-dataframe">
<h4>P1.preprocess(df: pandas.DataFrame)<a class="headerlink" href="#p1-preprocess-df-pandas-dataframe" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><strong>takes:</strong> The dataframe from variable <code class="docutils literal notranslate"><span class="pre">article_df</span></code>. Required are column names “Text”, “TopicDD”, “LanguageDD”</div></blockquote>
<blockquote>
<div><strong>returns:</strong> A preprocessed dataframe P1_df, text is cleared of <code class="docutils literal notranslate"><span class="pre">\n</span></code> characters.</div></blockquote>
</div>
<div class="section" id="i2-embeddings-path-str-article-len-int">
<h4>I2.embeddings(path: Str, article_len: Int)<a class="headerlink" href="#i2-embeddings-path-str-article-len-int" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>takes:</strong> A path to a csv file saved within the file system before with a text column.</p>
<p><strong>returns:</strong> A dataframe with additional columns <code class="docutils literal notranslate"><span class="pre">dim</span></code> and <code class="docutils literal notranslate"><span class="pre">reduced_dim</span></code>, where <em>dim</em> are the embeddings of a Roberta Language model and <em>reduced_dim</em> is the reduced space, for processing on algorithms that don’t take high-dimensional data.</p>
</div></blockquote>
</div>
<div class="section" id="i3-topicmodel-from-csv-nr-of-ranks-int">
<h4>I3.topicmodel_from_csv(nr_of_ranks = int)<a class="headerlink" href="#i3-topicmodel-from-csv-nr-of-ranks-int" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>takes:</strong> Default: A path to a csv saved within the file system with a text column, int <em>nr_of_ranks</em> specifying how many top words per cluster are in the returned dataframes.</p>
<p><strong>returns:</strong> 2 dataframes with various unsupervised generated features from the <em>Text</em> column and numerical embeddings namely:</p>
<ul class="simple">
<li>First dataframe:  Same as table from the input path <code class="docutils literal notranslate"><span class="pre">articles_df</span></code> with additional column <em>clusterID</em> from HDBScan</li>
<li>Second dataframe: A table with <em>nr_of_ranks</em> terms for each cluster generated by HDBScan, ranked by TF-IDF and TF.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="i5-generate-lda-mallet-path-str-start-int-limit-int-step-int">
<h4>I5.generate_LDA(mallet_path: Str, start: Int, limit: Int, step: Int)<a class="headerlink" href="#i5-generate-lda-mallet-path-str-start-int-limit-int-step-int" title="Permalink to this headline">¶</a></h4>
<p>The following function trains multiple LDA models using mallet wrapper for python. Various model configurations are trained and the best one (based on coherence score) will be used. Parameters <em>start</em> and <em>limit</em> are passed to the function in order to predefine the range of topics to be trained.</p>
<blockquote>
<div><p><strong>takes:</strong> <code class="docutils literal notranslate"><span class="pre">mallet_path</span></code> as defined in section <strong>PATHS</strong> above, a path to a csv file saved within the file system with a <em>text</em> column, <em>start:</em> defines nr. of topics to start building an LDA model, <em>limit:</em> max. nr. of topics a model can have, <em>step:</em> difference in nr of topics between two successive builds.</p>
<p><strong>returns:</strong></p>
<ul class="simple">
<li><em>dataframe I5_df_dom:</em> assigns for each article the corresponding LDA features <em>LDA_Dominant_Topic</em>, <em>LDA_Topic_Perc_Contribution</em> and <em>Keywords</em>.</li>
<li><em>dataframe IF_df_repres:</em> assigns for each topic features such as <em>Keywords</em> or most representative Text for a topic.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="c1-1-aggregate-dfs">
<h4>C1_1.aggregate_dfs()<a class="headerlink" href="#c1-1-aggregate-dfs" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p><strong>takes:</strong> argument implicit: <em>I3_output_df_clustered.csv</em>, <em>I5_output_LDA_dominant_topic.csv</em></p>
<p><strong>returns:</strong> An aggregated dataframe with features generated from the LDA and features generated from HDBScan</p>
</div></blockquote>
</div>
<div class="section" id="now-use-either">
<h4>Now use either:<a class="headerlink" href="#now-use-either" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>O1_1.annotate_topics_in_terminal()</strong></li>
</ul>
<p>This function can be used instead of <code class="docutils literal notranslate"><span class="pre">O2.create_tables_for_annotation()</span></code>. It provides overview over each cluster that was generated unsupervised. It presents cluster features and requests a label for that cluster from the user via command line input.</p>
<blockquote>
<div><p><strong>takes:</strong> nothing, is accessing the files from folder <em>files</em></p>
<p><strong>returns:</strong> <em>dataframes O1_df_annotation_hdbscan</em>, <em>O1_df_annotation_lda</em></p>
</div></blockquote>
<ul class="simple">
<li><strong>O2.create_tables_for_annotation()</strong></li>
</ul>
<blockquote>
<div><strong>takes:</strong> implicit CSVs from LDA and Unsupervised HDBScan Clustering that were stored in <em>files</em> folder earlier.
<strong>returns:</strong> 2 dataframes for the purpose of the annotation: <em>O2_df_annotation_hdbscan.csv</em> , <em>O2_df_annotation_lda.csv</em></div></blockquote>
<p>The column to be annotated is <code class="docutils literal notranslate"><span class="pre">User_Annotation</span></code> in both files. In this first manual annotation round all clusters resulting from the unsupervised methods need to be assigned to the user’s own topic system, which is preferably coded in int numbers. This encoding is later required for the active learning classifier in section <strong>C</strong>.</p>
</div>
</div>
<div class="section" id="part-2">
<h3>Part 2:<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h3>
<p>Run python script <code class="docutils literal notranslate"><span class="pre">feature_generator_Part2</span></code>, which reads the annotated tables.</p>
<div class="section" id="o3-write-annotations">
<h4>O3.write_annotations()<a class="headerlink" href="#o3-write-annotations" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><strong>takes:</strong> the 2 dataframes that were user-annotated in 02
<strong>returns:</strong> applied user annotated topics for each cluster to each text in a single dataframe <code class="docutils literal notranslate"><span class="pre">O3_df_articles.csv</span></code></div></blockquote>
</div>
<div class="section" id="c-classify-label-column-name-str-args-list-str">
<h4>C.classify(label_column_name: Str, *args: List[Str])<a class="headerlink" href="#c-classify-label-column-name-str-args-list-str" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><strong>takes:</strong> a label column on which the classifier is trained, followed by several specified columns for classifier features
<strong>returns:</strong> None</div></blockquote>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="protokoll.html" class="btn btn-neutral float-right" title="Entwicklungsprotokoll" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="README_app.html" class="btn btn-neutral float-left" title="Installation and Innitialization of Docker Image" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Dylan, Francesco.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>